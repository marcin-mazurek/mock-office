{"version":3,"sources":["../../../../../src/lib/app/appServer/middlewares/stopServerMiddleware.js"],"names":["stopServerMiddleware","req","res","schema","properties","id","type","required","validate","body","getServer","webServer","stop","then","status","json","err","error","message","errors"],"mappings":";;;;;kBAGwBA,oB;;AAHxB;;;;AACA;;;;;;AAEe,SAASA,oBAAT,CAA8BC,GAA9B,EAAmCC,GAAnC,EAAwC;AACrD,MAAMC,SAAS;AACbC,gBAAY;AACVC,UAAI;AACFC,cAAM;AADJ;AADM,KADC;AAMbC,cAAU,CAAC,IAAD;AANG,GAAf;;AASA,MAAI,cAAIC,QAAJ,CAAaL,MAAb,EAAqBF,IAAIQ,IAAzB,CAAJ,EAAoC;AAClC,yBACGC,SADH,CACaT,IAAIQ,IAAJ,CAASJ,EADtB,EAC0BM,SAD1B,CAEGC,IAFH,GAGGC,IAHH,CAII,YAAM;AACJX,UAAIY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEV,IAAIJ,IAAIQ,IAAJ,CAASJ,EAAf,EAArB;AACD,KANL,EAOI,UAACW,GAAD,EAAS;AACPd,UAAIY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEE,OAAOD,IAAIE,OAAb,EAArB;AACD,KATL;AAWD,GAZD,MAYO;AACLhB,QAAIY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEE,OAAO,cAAIE,MAAJ,CAAW,CAAX,EAAcD,OAAvB,EAArB;AACD;AACF","file":"stopServerMiddleware.js","sourcesContent":["import serversHub from '../../serversHub';\nimport ajv from '../ajv';\n\nexport default function stopServerMiddleware(req, res) {\n  const schema = {\n    properties: {\n      id: {\n        type: 'string'\n      }\n    },\n    required: ['id']\n  };\n\n  if (ajv.validate(schema, req.body)) {\n    serversHub\n      .getServer(req.body.id).webServer\n      .stop()\n      .then(\n        () => {\n          res.status(200).json({ id: req.body.id });\n        },\n        (err) => {\n          res.status(400).json({ error: err.message });\n        }\n      );\n  } else {\n    res.status(400).json({ error: ajv.errors[0].message });\n  }\n}\n"]}