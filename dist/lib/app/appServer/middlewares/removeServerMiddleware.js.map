{"version":3,"sources":["../../../../../src/lib/app/appServer/middlewares/removeServerMiddleware.js"],"names":["configure","ajv","req","res","schema","type","properties","id","required","validate","body","remove","then","status","end","json","errors"],"mappings":";;;;;kBAEwBA,S;;AAFxB;;;;;;AAEe,SAASA,SAAT,CAAmBC,GAAnB,EAAwB;AACrC,SAAO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACnB,QAAMC,SAAS;AACbC,YAAM,QADO;AAEbC,kBAAY;AACVC,YAAI;AACFF,gBAAM;AADJ;AADM,OAFC;AAObG,gBAAU,CAAC,IAAD;AAPG,KAAf;;AAUA,QAAIP,IAAIQ,QAAJ,CAAaL,MAAb,EAAqBF,IAAIQ,IAAzB,CAAJ,EAAoC;AAClC,2BAAWC,MAAX,CAAkBT,IAAIQ,IAAJ,CAASH,EAA3B,EACGK,IADH,CAEI,YAAM;AACJT,YAAIU,MAAJ,CAAW,GAAX,EAAgBC,GAAhB;AACD,OAJL,EAKI,YAAM;AACJX,YAAIU,MAAJ,CAAW,GAAX,EAAgBC,GAAhB;AACD,OAPL;AASD,KAVD,MAUO;AACLX,UAAIU,MAAJ,CAAW,GAAX,EAAgBE,IAAhB,CAAqBd,IAAIe,MAAJ,CAAW,CAAX,CAArB;AACD;AACF,GAxBD;AAyBD","file":"removeServerMiddleware.js","sourcesContent":["import serversHub from '../../serversHub';\n\nexport default function configure(ajv) {\n  return (req, res) => {\n    const schema = {\n      type: 'object',\n      properties: {\n        id: {\n          type: 'string'\n        }\n      },\n      required: ['id']\n    };\n\n    if (ajv.validate(schema, req.body)) {\n      serversHub.remove(req.body.id)\n        .then(\n          () => {\n            res.status(200).end();\n          },\n          () => {\n            res.status(404).end();\n          }\n        );\n    } else {\n      res.status(400).json(ajv.errors[0]);\n    }\n  };\n}\n"]}