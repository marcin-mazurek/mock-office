{"version":3,"sources":["../../../../../src/lib/app/appServer/middlewares/startServerMiddleware.js"],"names":["configure","ajv","req","res","schema","properties","id","type","required","validate","body","getServer","webServer","start","then","status","json","err","error","errors","message"],"mappings":";;;;;kBAEwBA,S;;AAFxB;;;;;;AAEe,SAASA,SAAT,CAAmBC,GAAnB,EAAwB;AACrC,SAAO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACnB,QAAMC,SAAS;AACbC,kBAAY;AACVC,YAAI;AACFC,gBAAM;AADJ;AADM,OADC;AAMbC,gBAAU,CAAC,IAAD;AANG,KAAf;;AASA,QAAIP,IAAIQ,QAAJ,CAAaL,MAAb,EAAqBF,IAAIQ,IAAzB,CAAJ,EAAoC;AAClC,2BACGC,SADH,CACaT,IAAIQ,IAAJ,CAASJ,EADtB,EAC0BM,SAD1B,CAEGC,KAFH,GAGGC,IAHH,CAII,YAAM;AACJX,YAAIY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEV,IAAIJ,IAAIQ,IAAJ,CAASJ,EAAf,EAArB;AACD,OANL,EAOI,UAACW,GAAD,EAAS;AACPd,YAAIY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEE,OAAOD,GAAT,EAArB;AACD,OATL;AAWD,KAZD,MAYO;AACLd,UAAIY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEE,OAAOjB,IAAIkB,MAAJ,CAAW,CAAX,EAAcC,OAAvB,EAArB;AACD;AACF,GAzBD;AA0BD","file":"startServerMiddleware.js","sourcesContent":["import serversHub from '../../serversHub';\n\nexport default function configure(ajv) {\n  return (req, res) => {\n    const schema = {\n      properties: {\n        id: {\n          type: 'string'\n        }\n      },\n      required: ['id']\n    };\n\n    if (ajv.validate(schema, req.body)) {\n      serversHub\n        .getServer(req.body.id).webServer\n        .start()\n        .then(\n          () => {\n            res.status(200).json({ id: req.body.id });\n          },\n          (err) => {\n            res.status(500).json({ error: err });\n          }\n        );\n    } else {\n      res.status(400).json({ error: ajv.errors[0].message });\n    }\n  };\n}\n"]}