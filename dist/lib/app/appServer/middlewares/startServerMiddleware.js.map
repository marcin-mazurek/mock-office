{"version":3,"sources":["../../../../../src/lib/app/appServer/middlewares/startServerMiddleware.js"],"names":["startServerMiddleware","req","res","schema","properties","id","type","required","validate","body","getServer","webServer","start","then","status","json","err","error","errors","message"],"mappings":";;;;;kBAGwBA,qB;;AAHxB;;;;AACA;;;;;;AAEe,SAASA,qBAAT,CAA+BC,GAA/B,EAAoCC,GAApC,EAAyC;AACtD,MAAMC,SAAS;AACbC,gBAAY;AACVC,UAAI;AACFC,cAAM;AADJ;AADM,KADC;AAMbC,cAAU,CAAC,IAAD;AANG,GAAf;;AASA,MAAI,cAAIC,QAAJ,CAAaL,MAAb,EAAqBF,IAAIQ,IAAzB,CAAJ,EAAoC;AAClC,yBACGC,SADH,CACaT,IAAIQ,IAAJ,CAASJ,EADtB,EAC0BM,SAD1B,CAEGC,KAFH,GAGGC,IAHH,CAII,YAAM;AACJX,UAAIY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEV,IAAIJ,IAAIQ,IAAJ,CAASJ,EAAf,EAArB;AACD,KANL,EAOI,UAACW,GAAD,EAAS;AACPd,UAAIY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEE,OAAOD,GAAT,EAArB;AACD,KATL;AAWD,GAZD,MAYO;AACLd,QAAIY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEE,OAAO,cAAIC,MAAJ,CAAW,CAAX,EAAcC,OAAvB,EAArB;AACD;AACF","file":"startServerMiddleware.js","sourcesContent":["import serversHub from '../../serversHub';\nimport ajv from '../ajv';\n\nexport default function startServerMiddleware(req, res) {\n  const schema = {\n    properties: {\n      id: {\n        type: 'string'\n      }\n    },\n    required: ['id']\n  };\n\n  if (ajv.validate(schema, req.body)) {\n    serversHub\n      .getServer(req.body.id).webServer\n      .start()\n      .then(\n        () => {\n          res.status(200).json({ id: req.body.id });\n        },\n        (err) => {\n          res.status(500).json({ error: err });\n        }\n      );\n  } else {\n    res.status(400).json({ error: ajv.errors[0].message });\n  }\n}\n"]}