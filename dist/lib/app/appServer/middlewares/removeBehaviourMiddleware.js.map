{"version":3,"sources":["../../../../../src/lib/app/appServer/middlewares/removeBehaviourMiddleware.js"],"names":["removeBehaviourMiddleware","req","res","schema","properties","behaviourId","type","serverId","required","validate","body","json","errors","server","getServer","status","end","webServer","codex","removeBehaviour"],"mappings":";;;;;kBAGwBA,yB;;AAHxB;;;;AACA;;;;;;AAEe,SAASA,yBAAT,CAAmCC,GAAnC,EAAwCC,GAAxC,EAA6C;AAC1D,MAAMC,SAAS;AACbC,gBAAY;AACVC,mBAAa;AACXC,cAAM;AADK,OADH;AAIVC,gBAAU;AACRD,cAAM;AADE;AAJA,KADC;AASbE,cAAU,CAAC,aAAD,EAAgB,UAAhB;AATG,GAAf;;AAYA,MAAI,CAAC,cAAIC,QAAJ,CAAaN,MAAb,EAAqBF,IAAIS,IAAzB,CAAL,EAAqC;AACnCR,QAAIS,IAAJ,CAAS,cAAIC,MAAb;AACA;AACD;;AAED,MAAMC,SAAS,qBAAWC,SAAX,CAAqBb,IAAIS,IAAJ,CAASH,QAA9B,CAAf;;AAEA,MAAI,CAACM,MAAL,EAAa;AACXX,QAAIa,MAAJ,CAAW,GAAX,EAAgBC,GAAhB;AACA;AACD;;AAED,MAAIH,OAAOI,SAAP,CAAiBC,KAAjB,CAAuBC,eAAvB,CAAuClB,IAAIS,IAAJ,CAASL,WAAhD,CAAJ,EAAkE;AAChEH,QAAIa,MAAJ,CAAW,GAAX,EAAgBC,GAAhB;AACD,GAFD,MAEO;AACLd,QAAIa,MAAJ,CAAW,GAAX,EAAgBC,GAAhB;AACD;AACF","file":"removeBehaviourMiddleware.js","sourcesContent":["import serversHub from '../../serversHub';\nimport ajv from '../ajv';\n\nexport default function removeBehaviourMiddleware(req, res) {\n  const schema = {\n    properties: {\n      behaviourId: {\n        type: 'string'\n      },\n      serverId: {\n        type: 'string'\n      }\n    },\n    required: ['behaviourId', 'serverId']\n  };\n\n  if (!ajv.validate(schema, req.body)) {\n    res.json(ajv.errors);\n    return;\n  }\n\n  const server = serversHub.getServer(req.body.serverId);\n\n  if (!server) {\n    res.status(400).end();\n    return;\n  }\n\n  if (server.webServer.codex.removeBehaviour(req.body.behaviourId)) {\n    res.status(200).end();\n  } else {\n    res.status(404).end();\n  }\n}\n"]}