{"version":3,"sources":["../../../../../src/lib/app/appServer/middlewares/removeBehaviourMiddleware.js"],"names":["configure","ajv","req","res","schema","properties","behaviourId","type","serverId","required","validate","body","json","errors","server","getServer","status","end","webServer","codex","removeBehaviour"],"mappings":";;;;;kBAEwBA,S;;AAFxB;;;;;;AAEe,SAASA,SAAT,CAAmBC,GAAnB,EAAwB;AACrC,SAAO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACnB,QAAMC,SAAS;AACbC,kBAAY;AACVC,qBAAa;AACXC,gBAAM;AADK,SADH;AAIVC,kBAAU;AACRD,gBAAM;AADE;AAJA,OADC;AASbE,gBAAU,CAAC,aAAD,EAAgB,UAAhB;AATG,KAAf;;AAYA,QAAI,CAACR,IAAIS,QAAJ,CAAaN,MAAb,EAAqBF,IAAIS,IAAzB,CAAL,EAAqC;AACnCR,UAAIS,IAAJ,CAASX,IAAIY,MAAb;AACA;AACD;;AAED,QAAMC,SAAS,qBAAWC,SAAX,CAAqBb,IAAIS,IAAJ,CAASH,QAA9B,CAAf;;AAEA,QAAI,CAACM,MAAL,EAAa;AACXX,UAAIa,MAAJ,CAAW,GAAX,EAAgBC,GAAhB;AACA;AACD;;AAED,QAAIH,OAAOI,SAAP,CAAiBC,KAAjB,CAAuBC,eAAvB,CAAuClB,IAAIS,IAAJ,CAASL,WAAhD,CAAJ,EAAkE;AAChEH,UAAIa,MAAJ,CAAW,GAAX,EAAgBC,GAAhB;AACD,KAFD,MAEO;AACLd,UAAIa,MAAJ,CAAW,GAAX,EAAgBC,GAAhB;AACD;AACF,GA9BD;AA+BD","file":"removeBehaviourMiddleware.js","sourcesContent":["import serversHub from '../../serversHub';\n\nexport default function configure(ajv) {\n  return (req, res) => {\n    const schema = {\n      properties: {\n        behaviourId: {\n          type: 'string'\n        },\n        serverId: {\n          type: 'string'\n        }\n      },\n      required: ['behaviourId', 'serverId']\n    };\n\n    if (!ajv.validate(schema, req.body)) {\n      res.json(ajv.errors);\n      return;\n    }\n\n    const server = serversHub.getServer(req.body.serverId);\n\n    if (!server) {\n      res.status(400).end();\n      return;\n    }\n\n    if (server.webServer.codex.removeBehaviour(req.body.behaviourId)) {\n      res.status(200).end();\n    } else {\n      res.status(404).end();\n    }\n  };\n}\n"]}