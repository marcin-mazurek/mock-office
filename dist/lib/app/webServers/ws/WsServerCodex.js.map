{"version":3,"sources":["../../../../../src/lib/app/webServers/ws/WsServerCodex.js"],"names":["WsServerCodex","serverId","addBehaviour","bind","behaviourCfg","behaviour","event","type","Error","behaviours","push"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;;;;;IAEqBA,a;;;AACnB,yBAAYC,QAAZ,EAAsB;AAAA;;AAAA,8HACdA,QADc;;AAEpB,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,OAApB;AAFoB;AAGrB;;AAED;;;;;iCACaC,Y,EAAc;AACzB,UAAIC,kBAAJ;;AAEA,cAAQD,aAAaE,KAAb,CAAmBC,IAA3B;AACE,aAAK,SAAL;AAAgB;AACdF,wBAAY,+BAAqB,KAAKJ,QAA1B,EAAoCG,YAApC,CAAZ;AACA;AACD;AACD,aAAK,YAAL;AAAmB;AACjBC,wBAAY,kCAAwB,KAAKJ,QAA7B,EAAuCG,YAAvC,CAAZ;AACA;AACD;AACD;AAAS;AACP,kBAAM,IAAII,KAAJ,CAAU,8BAAV,CAAN;AACD;AAXH;;AAcA,WAAKC,UAAL,CAAgBC,IAAhB,CAAqBL,SAArB;AACA,aAAOA,SAAP;AACD;;;;;;kBA1BkBL,a","file":"WsServerCodex.js","sourcesContent":["import MessageBehaviour from '../ws/MessageBehaviour';\nimport ConnectionBehaviour from '../ws/ConnectionBehaviour';\nimport Codex from '../../codex';\n\nexport default class WsServerCodex extends Codex {\n  constructor(serverId) {\n    super(serverId);\n    this.addBehaviour = this.addBehaviour.bind(this);\n  }\n\n  // addBehaviour :: Object -> Behaviour\n  addBehaviour(behaviourCfg) {\n    let behaviour;\n\n    switch (behaviourCfg.event.type) {\n      case 'message': {\n        behaviour = new MessageBehaviour(this.serverId, behaviourCfg);\n        break;\n      }\n      case 'connection': {\n        behaviour = new ConnectionBehaviour(this.serverId, behaviourCfg);\n        break;\n      }\n      default: {\n        throw new Error('Invalid behaviour event type');\n      }\n    }\n\n    this.behaviours.push(behaviour);\n    return behaviour;\n  }\n}\n"]}