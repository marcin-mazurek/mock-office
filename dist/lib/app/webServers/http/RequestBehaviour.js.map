{"version":3,"sources":["../../../../../src/lib/app/webServers/http/RequestBehaviour.js"],"names":["RequestBehaviour","req","res","reactions","filter","r","forEach","configureReceiver","id","reactionCfg","length","Error","reaction","type"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;;;;;;;IAEqBA,gB;;;;;;;;;;;;AACnB;sCACkBC,G,EAAKC,G,EAAK;AAC1B,WAAKC,SAAL,CACGC,MADH,CACU;AAAA,eAAKC,uCAAL;AAAA,OADV,EAEGC,OAFH,CAEW;AAAA,eAAKD,EAAEE,iBAAF,CAAoBN,GAApB,EAAyBC,GAAzB,CAAL;AAAA,OAFX;AAGA,aAAO,IAAP;AACD;;AAED;;;;mCACeM,E,EAAIC,W,EAAa;AAC9B,UAAI,KAAKN,SAAL,CAAeO,MAAf,GAAwB,CAA5B,EAA+B;AAC7B,cAAM,IAAIC,KAAJ,CAAU,iDAAV,CAAN;AACD;;AAED,UAAIC,iBAAJ;;AAEA,UAAIH,YAAYI,IAAZ,KAAqB,UAAzB,EAAqC;AACnCD,mBAAW,+BAAqBJ,EAArB,EAAyBC,WAAzB,CAAX;AACD,OAFD,MAEO;AACL,cAAM,IAAIE,KAAJ,6BAAoCF,YAAYI,IAAhD,CAAN;AACD;;AAED,aAAOD,QAAP;AACD;;;;;;kBAxBkBZ,gB","file":"RequestBehaviour.js","sourcesContent":["import Behaviour from '../../codex/Behaviour';\nimport ResponseReaction from './ResponseReaction';\n\nexport default class RequestBehaviour extends Behaviour {\n  // configureReceiver :: (http.ClientRequest, http.ServerResponse) -> RequestBehaviour\n  configureReceiver(req, res) {\n    this.reactions\n      .filter(r => r instanceof ResponseReaction)\n      .forEach(r => r.configureReceiver(req, res));\n    return this;\n  }\n\n  // createReaction :: Object -> ResponseReaction\n  createReaction(id, reactionCfg) {\n    if (this.reactions.length > 1) {\n      throw new Error('RequestBehaviour can have only single reaction.');\n    }\n\n    let reaction;\n\n    if (reactionCfg.type === 'response') {\n      reaction = new ResponseReaction(id, reactionCfg);\n    } else {\n      throw new Error(`Invalid reaction type: ${reactionCfg.type}`);\n    }\n\n    return reaction;\n  }\n}\n"]}