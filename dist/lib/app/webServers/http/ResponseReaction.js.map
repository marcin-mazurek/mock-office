{"version":3,"sources":["../../../../../src/lib/app/webServers/http/ResponseReaction.js"],"names":["ResponseReaction","req","res","headers","origin","set","params","status","json","payload"],"mappings":";;;;;;;;AAAA;;;;;;;;;;;;IAEqBA,gB;;;;;;;;;;;;AACnB;sCACkBC,G,EAAKC,G,EAAK;AAC1B,WAAKD,GAAL,GAAWA,GAAX;AACA,WAAKC,GAAL,GAAWA,GAAX;AACD;;;gCAEW;AACV;AACA,UAAI,KAAKD,GAAL,CAASE,OAAT,CAAiBC,MAArB,EAA6B;AAC3B,aAAKF,GAAL,CAASG,GAAT,CAAa,6BAAb,EAA4C,KAAKJ,GAAL,CAASE,OAAT,CAAiBC,MAA7D;AACD;;AAED,UAAI,KAAKE,MAAL,CAAYH,OAAhB,EAAyB;AACvB,aAAKD,GAAL,CAASG,GAAT,CAAa,KAAKC,MAAL,CAAYH,OAAzB;AACD;;AAED,UAAI,KAAKG,MAAL,CAAYC,MAAhB,EAAwB;AACtB,aAAKL,GAAL,CAASK,MAAT,CAAgB,KAAKD,MAAL,CAAYC,MAA5B;AACD;;AAED,WAAKL,GAAL,CAASM,IAAT,CAAc,KAAKF,MAAL,CAAYG,OAA1B;AACD;;;;;;kBAtBkBT,gB","file":"ResponseReaction.js","sourcesContent":["import Reaction from '../../codex/Reaction';\n\nexport default class ResponseReaction extends Reaction {\n  // configureReceiver :: (http.ClientRequest, http.ServerResponse) -> void\n  configureReceiver(req, res) {\n    this.req = req;\n    this.res = res;\n  }\n\n  doCommand() {\n    // allow CORS by default\n    if (this.req.headers.origin) {\n      this.res.set('Access-Control-Allow-Origin', this.req.headers.origin);\n    }\n\n    if (this.params.headers) {\n      this.res.set(this.params.headers);\n    }\n\n    if (this.params.status) {\n      this.res.status(this.params.status);\n    }\n\n    this.res.json(this.params.payload);\n  }\n}\n"]}